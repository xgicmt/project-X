<div class="row">
<div class="col-md-1"></div>
<div class="col-md-8">
  <div class="propertySummaryBox">
    <p class="propName"><%= @prop.name %></p>
    <%#= image_tag @prop.propimages.first.image_name, size: "500x200" %>
  
  <div id="carousel-example-generic" style="width: 100%; height: 400px; overflow:hidden;" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <% @prop.propimages.each_with_index do |p, index| %>
      <li data-target="#carousel-example-generic" data-slide-to="<%= index %>" class= "<%= index == 0 ? 'active' : ''%>"></li>
    <% end %>
  </ol>

  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox" >
    <% @prop.propimages.each_with_index do |propimage, index|%>
      <div class="<%= index == 0 ? 'item active' : 'item' %>">
        <%= image_tag propimage.image_name %>
      </div>
    <% end %>
  </div>

  <!-- Controls -->
  <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
  </div>
    
  <div class="propertyOverview">
    <%= markdown_to_html @prop.overview %>
  </div>
  
  </div>
  <div class="sponsorBox">
    <h2>Sponsor</h2>
    <img class="sponsorLogo" src='<%= @sponsor.logo %>' height="100" alt='<%= @sponsor.name %> Logo'/>
    <p class="sponsorName"> <%= @sponsor.name %></p>
    <div class="unMarkdown"><%= markdown_to_html @sponsor.synopsis %></div>
  </div>
  <div class="leaderTeamBox">
    <% @leaders.each do |leader| %>
      <div class="leaderBox">
        <img src="<%= leader.picture %>" height="100" width='100' class="ltm_picture" />
        <span class="leaderName"> <%= leader.name %></span>
        <%= markdown_to_html leader.synopsis %>
      </div>
      <% end %>
  </div>
    <% if @prop.extras %>
      <% @prop.extras.each do |extra| %>
        <div class="miscView">
          <h2 class="miscTitle"><%= extra.title %></h2>
          <p class="miscBody"><%= markdown_to_html extra.body %></p> 
        </div>
      <% end %>
    <% end %>
  <div class="googleMaps">
    <div id="map-canvas"></div>  
  </div>
  </div>
  <div class="col-md-3">
      <p class="propName">Key Facts</p>
  <p class="propAddress"><%= @prop.address_street %><br><%= @prop.address_city %>, <%= @prop.address_state %> <%= @prop.address_zipcode %></p>
      <div class="propertyList"> 
         <ul>
           <li>Purchase Price:         </li>
           <li>Minimum Investment:     </li>
           <li>Targeted IRR:           </li>
           <li>Targeted Hold Period:   </li>
           <li>Targeted Yield:         </li> 
        </ul>
      </div>
      <div class="answers"> 
        <ul>
          <li><%= @prop.purchase_price %></li>
          <li><%= @prop.min_investment %></li>
          <li><%= @prop.targeted_irr %></li>
          <li><%= @prop.targeted_hold_period %></li>
          <li><%= @prop.targeted_yield %></li> 
        </ul>
      </div>

      </div>

</div>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
    <script>
var geocoder;
var map;

function getCoordinates (address, callback) {
  var coordinates;
  geocoder.geocode({ address: address}, function (results, status) {
  	coords_obj = results[0].geometry.location;
  	//coordinates = [coords_obj.A,coords_obj.F];
   	//console.log(results[0].geometry.location.lat());
   	coordinates = [coords_obj.lat(),coords_obj.lng()]
   	callback(coordinates)
  })
} 

function initialize() {
	getCoordinates('<%= "#{@prop.address_street} #{@prop.address_state} #{@prop.address_zipcode}"  %>', function(coords){
      var latlng = new google.maps.LatLng(coords[0], coords[1]);		
      var mapOptions = {
        zoom: 18,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.SATELLITE
      };  
  //  console.log(latlng);
      map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
	})
}

geocoder = new google.maps.Geocoder();


google.maps.event.addDomListener(window, 'load', initialize);

    </script>